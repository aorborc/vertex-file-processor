<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/a28d8a06cc6bf4ab.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-c81f7fd28659d64f.js"/><script src="/_next/static/chunks/fd9d1056-5d0c434f4506d830.js" async=""></script><script src="/_next/static/chunks/117-082d75105b2c2d1d.js" async=""></script><script src="/_next/static/chunks/main-app-40d41fc1b23026f2.js" async=""></script><script src="/_next/static/chunks/app/page-3675c44625d5b95f.js" async=""></script><title>Vertex File Processor</title><meta name="description" content="Upload a PDF URL and prompt, process via Vertex AI"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="container"><header class="header"><h1 class="brand">Vertex File Processor</h1><nav class="nav"></nav></header><main class="grid" style="gap:16px"><div class="card" style="display:flex;gap:12px;align-items:center"><span class="badge">Endpoints</span><div class="mono" title="Process endpoint">process: <!-- -->https://us-central1-gemini-lens-w9we5.cloudfunctions.net/processFile</div><div class="mono" title="Signed URL endpoint">signed-url: <!-- -->https://us-central1-gemini-lens-w9we5.cloudfunctions.net/signedUrl</div></div><form class="card grid" style="gap:12px"><label class="label">PDF URL<input class="input" type="url" placeholder="https://example.com/file.pdf" required="" value="gs://gemini-lens-w9we5.firebasestorage.app/uploads/1756668214325-awfd10.pdf"/><div class="muted" style="font-size:12px">Original file URL (reference):<div class="mono" style="white-space:nowrap;overflow-x:auto">https://creatorapp.zohopublic.in/file/deloittettipl/trade-invoice-platform/Files/133740007807502149/upload_invoice/download/5WnO5ZXWDuSsTXDKDHKFN3wV2bj2zwCE47zZ97HVe7rCWHnjQQftsTpZqXeO7uBX0eu8qRrS6yANufr7b6PCOMmxk32t43nQeMNb?filepath=/1756645255475149_13.pdf</div>See API Docs for differences between web file URLs and GCS gs:// URIs.</div></label><label class="label">Prompt<textarea class="textarea" rows="4">You are an expert invoice parser. Extract structured JSON with per-field confidence (0-1). Return ONLY JSON. Fields: { supplier_name, supplier_address, supplier_tax_id, invoice_number, invoice_date, due_date, billing_details, shipping_address, bill_to, ship_to, currency, subtotal, tax, total, line_items: [{ description, indent_qty, dispatch_qty, received_qty, quantity, unit_price, amount, confidence }], fields_confidence: { field_name: score } }. Notes: (1) Parse handwritten values for received_qty when present (OK or a number). (2) Map item quantities: indent_qty = requested, dispatch_qty = shipped, received_qty = actually received. (3) Populate quantity as the received_qty if present, else the shipped/dispatch qty. (4) Provide numeric values where possible and dates in YYYY-MM-DD. (5) billing_details and shipping_address should be strings capturing the blocks labelled BILLING DETAILS and SHIPPING ADDRESS if present.</textarea></label><button type="submit" class="btn"><svg class="icon" viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2z"></path></svg>Send to Vertex</button></form><div class="row"><button type="button" class="btn secondary" disabled=""><svg class="icon" viewBox="0 0 24 24"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 110-10 5 5 0 010 10z"></path></svg>Open Preview</button><span class="muted">Run once to enable preview</span></div><details class="card" style="padding:12px"><summary style="cursor:pointer;font-weight:600">Response</summary></details><details class="card" style="padding:12px"><summary style="cursor:pointer;font-weight:600">UI Test Steps</summary><div class="grid" style="gap:10px;margin-top:10px"><ol style="margin:0;padding-left:18px"><li>Enter a PDF URL (or gs:// URI) and adjust the prompt if needed.</li><li>Click “Send to Vertex”. Observe the live timer in seconds on the Response header.</li><li>When the response arrives, “Open Preview” becomes enabled.</li><li>Click “Open Preview” to view the PDF on the left and extracted fields on the right.</li><li>In Preview, edit numeric line items (Qty, Unit Price, Amount). Amount and summary (Subtotal/Total) recalc automatically.</li><li>Trailing confidence (%) appears inside each input. The line items list scrolls independently.</li></ol></div></details><details class="card" style="padding:12px"><summary style="cursor:pointer;font-weight:600">API Docs</summary><div class="grid" style="gap:10px;margin-top:10px"><p class="muted">Send a PDF URL and prompt to Vertex AI. The server uploads to Google Cloud Storage and calls Gemini. In production, Hosting rewrites <code>/api/process-file</code> to the Cloud Function.</p><ul><li>Effective API base: <span class="badge mono">https://us-central1-gemini-lens-w9we5.cloudfunctions.net/processFile</span></li><li>Accepts http/https or gs:// URLs</li><li>Response includes <code>gcsUri</code>, parsed <code>extracted</code>, and full <code>vertex</code></li><li>Repository: <a href="https://github.com/aorborc/vertex-file-processor" target="_blank" rel="noreferrer">github.com/aorborc/vertex-file-processor</a></li></ul><div><h3 style="margin:0">Request</h3><pre class="code mono">POST https://us-central1-gemini-lens-w9we5.cloudfunctions.net/processFile
Content-Type: application/json

{
  &quot;fileUrl&quot;: &quot;https://.../file.pdf&quot; | &quot;gs://bucket/path.pdf&quot;,
  &quot;prompt&quot;: &quot;&lt;instruction&gt;&quot;
}</pre></div><div><h3 style="margin:0">Response (sample)</h3><pre class="code mono">{
  &quot;success&quot;: true,
  &quot;gcsUri&quot;: &quot;gs://&lt;bucket&gt;/uploads/&lt;timestamp&gt;-&lt;id&gt;.pdf&quot;,
  &quot;extracted&quot;: {
    &quot;supplier_name&quot;: &quot;ACME Corp&quot;,
    &quot;supplier_name_confidence&quot;: 0.98,
    &quot;supplier_address&quot;: &quot;123 Example St, City&quot;,
    &quot;supplier_address_confidence&quot;: 0.95,
    &quot;supplier_tax_id&quot;: &quot;27ABCDE1234Z1Z5&quot;,
    &quot;supplier_tax_id_confidence&quot;: 0.9,
    &quot;invoice_number&quot;: &quot;INV-12345&quot;,
    &quot;invoice_number_confidence&quot;: 0.99,
    &quot;invoice_date&quot;: &quot;2025-08-31&quot;,
    &quot;invoice_date_confidence&quot;: 0.98,
    &quot;due_date&quot;: &quot;2025-09-30&quot;,
    &quot;due_date_confidence&quot;: 0.8,
    &quot;bill_to&quot;: &quot;Cloudstore Retail Pvt Ltd ...&quot;,
    &quot;bill_to_confidence&quot;: 0.95,
    &quot;ship_to&quot;: &quot;Cloudstore Retail Pvt Ltd ...&quot;,
    &quot;ship_to_confidence&quot;: 0.95,
    &quot;currency&quot;: &quot;INR&quot;,
    &quot;currency_confidence&quot;: 0.7,
    &quot;subtotal&quot;: 3990,
    &quot;subtotal_confidence&quot;: 0.9,
    &quot;tax&quot;: 0,
    &quot;tax_confidence&quot;: 0.5,
    &quot;total&quot;: 3990,
    &quot;total_confidence&quot;: 0.99,
    &quot;line_items&quot;: [
      {
        &quot;description&quot;: &quot;French Beans&quot;,
        &quot;description_confidence&quot;: 0.99,
        &quot;quantity&quot;: 10,
        &quot;quantity_confidence&quot;: 0.99,
        &quot;unit_price&quot;: 90,
        &quot;unit_price_confidence&quot;: 0.99,
        &quot;amount&quot;: 900,
        &quot;amount_confidence&quot;: 0.99
      }
    ],
    &quot;fields_confidence&quot;: {
      &quot;supplier_name&quot;: 0.98,
      &quot;invoice_number&quot;: 0.99,
      &quot;total&quot;: 0.99
    }
  },
  &quot;extractedRaw&quot;: {
    &quot;supplier_name&quot;: &quot;ACME Corp&quot;,
    &quot;supplier_address&quot;: &quot;123 Example St, City&quot;,
    &quot;supplier_tax_id&quot;: &quot;27ABCDE1234Z1Z5&quot;,
    &quot;invoice_number&quot;: &quot;INV-12345&quot;,
    &quot;invoice_date&quot;: &quot;2025-08-31&quot;,
    &quot;due_date&quot;: &quot;2025-09-30&quot;,
    &quot;bill_to&quot;: &quot;Cloudstore Retail Pvt Ltd ...&quot;,
    &quot;ship_to&quot;: &quot;Cloudstore Retail Pvt Ltd ...&quot;,
    &quot;currency&quot;: &quot;INR&quot;,
    &quot;subtotal&quot;: 3990,
    &quot;tax&quot;: 0,
    &quot;total&quot;: 3990,
    &quot;line_items&quot;: [
      {
        &quot;description&quot;: &quot;French Beans&quot;,
        &quot;quantity&quot;: 10,
        &quot;unit_price&quot;: 90,
        &quot;amount&quot;: 900,
        &quot;confidence&quot;: 0.99
      }
    ],
    &quot;fields_confidence&quot;: {
      &quot;supplier_name&quot;: 0.98,
      &quot;invoice_number&quot;: 0.99,
      &quot;total&quot;: 0.99
    }
  },
  &quot;vertex&quot;: {
    &quot;modelVersion&quot;: &quot;gemini-2.5-pro&quot;,
    &quot;candidates&quot;: [
      {}
    ]
  }
}</pre></div></div></details></main></div><script src="/_next/static/chunks/webpack-c81f7fd28659d64f.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/a28d8a06cc6bf4ab.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[2846,[],\"\"]\n4:I[9107,[],\"ClientPageRoot\"]\n5:I[434,[\"931\",\"static/chunks/app/page-3675c44625d5b95f.js\"],\"default\",1]\n6:I[4707,[],\"\"]\n7:I[6423,[],\"\"]\n9:I[1060,[],\"\"]\na:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"GdCIl5h9pm9XIxeizDo6-\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"\"],\"initialTree\":[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",[\"$\",\"$L4\",null,{\"props\":{\"params\":{},\"searchParams\":{}},\"Component\":\"$5\"}],null],null],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a28d8a06cc6bf4ab.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"container\",\"children\":[[\"$\",\"header\",null,{\"className\":\"header\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"brand\",\"children\":\"Vertex File Processor\"}],[\"$\",\"nav\",null,{\"className\":\"nav\"}]]}],[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L8\"],\"globalErrorComponent\":\"$9\",\"missingSlots\":\"$Wa\"}]\n"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Vertex File Processor\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Upload a PDF URL and prompt, process via Vertex AI\"}]]\n3:null\n"])</script></body></html>